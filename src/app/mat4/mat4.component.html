<div>
    <h1>Table with ang-mat filter+sort</h1>
</div>
<div class="mat-elevation-z8">

    <form [formGroup]="searchForm" class="search__form">
        <table mat-table [dataSource]="dataSource" matSort>
            <ng-container matColumnDef="select">
                <th mat-header-cell *matHeaderCellDef mwlResizable [enableGhostResize]="true"
                    (resizeEnd)="onResizeEnd($event, 'select')"
                    [resizeEdges]="{bottom: false, right: true, top: false, left: true}">
                    <mat-checkbox (change)="$event ? masterToggle() : null"
                        [checked]="selection.hasValue() && isAllSelected()"
                        [indeterminate]="selection.hasValue() && !isAllSelected()">
                    </mat-checkbox>
                </th>
                <td mat-cell *matCellDef="let row">
                    <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                        [checked]="selection.isSelected(row)">
                    </mat-checkbox>
                </td>
            </ng-container>

            <!-- Position Column -->
            <ng-container matColumnDef="position">
                
                <th mat-header-cell *matHeaderCellDef mat-sort-header mwlResizable [enableGhostResize]="true"
                    (resizeEnd)="onResizeEnd($event, 'position')"
                    [resizeEdges]="{bottom: false, right: true, top: false, left: true}">No  <span #icon>
                        <button matTooltip="Click for extra info" matTooltipPosition="above" mat-icon-button (click)="openDialog($event)"><mat-icon  color="accent" class="icon">info_outline</mat-icon></button>
                    </span>
                    <mat-form-field class="search__form_field" appearance="outline">

                        <input type="number" aria-label="symbol" matInput formControlName="position"
                            (keyup)="applyFilter()">
                        <mat-select placeholder="position">
                            <mat-option *ngFor="let type of filterTypes.position" [value]="type" (click)="applyType('position', type)">
                                {{type}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </th>
                <td mat-cell *matCellDef="let element"> {{element.position}} </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header mwlResizable [enableGhostResize]="true"
                    (resizeEnd)="onResizeEnd($event, 'name')"
                    [resizeEdges]="{bottom: false, right: true, top: false, left: true}"><span #icon>
                        <button matTooltip="Click for extra info" matTooltipPosition="above" mat-icon-button (click)="openDialog($event)"><mat-icon  color="accent" class="icon">info_outline</mat-icon></button>
                    </span> Name
                    <mat-form-field class="search__form_field" appearance="outline">
                        <input type="text" aria-label="Name" matInput formControlName="name" (keyup)="applyFilter()">
                        <mat-select placeholder="Type">
                            <mat-option *ngFor="let type of filterTypes.name" [value]="type" (click)="applyType('name', type)">
                                {{type}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </th>
                <td mat-cell *matCellDef="let element"> {{element.name}} </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="weight">
                <th mat-header-cell *matHeaderCellDef mat-sort-header mwlResizable [enableGhostResize]="true"
                    (resizeEnd)="onResizeEnd($event, 'weight')"
                    [resizeEdges]="{bottom: false, right: true, top: false, left: true}"><span #icon>
                        <button matTooltip="Click for extra info" matTooltipPosition="above" mat-icon-button (click)="openDialog($event)"><mat-icon  color="accent" class="icon">info_outline</mat-icon></button>
                    </span> Weight
                    <mat-form-field class="search__form_field" appearance="outline">
                        <input type="weight" aria-label="symbol" matInput formControlName="weight"
                            (keyup)="applyFilter()">
                        <mat-select placeholder="weight">
                            <mat-option *ngFor="let type of filterTypes.weight" [value]="type" (click)="applyType('weight', type)">
                                {{type}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </th>
                <td mat-cell *matCellDef="let element"> {{element.weight}} </td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="symbol">
                <th mat-header-cell *matHeaderCellDef mat-sort-header mwlResizable [enableGhostResize]="true"
                    (resizeEnd)="onResizeEnd($event, 'symbol')"
                    [resizeEdges]="{bottom: false, right: true, top: false, left: true}"> Symbol
                    <mat-form-field class="search__form_field" appearance="outline">
                        <input type="text" aria-label="symbol" matInput formControlName="symbol"
                            (keyup)="applyFilter()">
                        <mat-select placeholder="Type">
                            <mat-option *ngFor="let type of filterTypes.symbol" [value]="type" (click)="applyType('symbol', type)">
                                {{type}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </th>
                <td mat-cell *matCellDef="let element"> {{element.symbol}} </td>
            </ng-container>

            <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef mwlResizable [enableGhostResize]="true"
                    (resizeEnd)="onResizeEnd($event, 'action')"
                    [resizeEdges]="{bottom: false, right: true, top: false, left: true}"> Action </th>
                <td mat-cell *matCellDef="let element">
                    <button mat-stroked-button color="primary">Action</button>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row matRipple *matRowDef="let row; columns: displayedColumns;"
                (click)="selectedRow = selectedRow === row ? null : row"
                [ngClass]="{ 'selected': row === selectedRow }"></tr>
        </table>
    </form>

    <mat-paginator [pageSize]="5" [pageSizeOptions]="[5, 10, 15, 20]"> </mat-paginator>